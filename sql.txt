#### SQL MISSION ####

## 1.1.1 ##
CREATE TABLE MediaItems 
(
	MID NUMBER(9,0) NOT NULL,
	TITLE VARCHAR2 (200),
	PROD_YEAR NUMBER(4),
	TITLE_LENGTH NUMBER(4),
	CONSTRAINT MediaItems_PK PRIMARY KEY(MID)
);

## 1.1.2 ##
CREATE TABLE Similarity 
(
	MID1 NUMBER(9,0) NOT NULL,
	MID2 NUMBER(9,0) NOT NULL,
	SIMILARITY FLOAT,
	CONSTRAINT Similarity_PK PRIMARY K`EY
	(MID1,MID2),
	CONSTRAINT FK_MID1MID FOREIGN KEY (MID1) REFERENCES MediaItems(MID),
	CONSTRAINT FK_MID2MID FOREIGN KEY (MID2) REFERENCES MediaItems(MID)
);

## 1.1.3 ##
create or replace trigger AutoIncrement
before INSERT
on MediaItems for EACH ROW
DECLARE
	ID_COUNTER NUMBER;
BEGIN
	SELECT MAX(MediaItems.MID) INTO ID_COUNTER FROM MediaItems;
	IF ID_COUNTER IS NULL THEN
	 :new.MID:=0;
	ELSE
	 :new.MID:=ID_COUNTER+1;
	END IF;
END;
